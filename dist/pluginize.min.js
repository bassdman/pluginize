!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=19)}([function(t,n,e){"use strict";const r=e(3).deprecate(()=>{},"Hook.context is deprecated and will be removed"),o=function(...t){return this.call=this._createCall("sync"),this.call(...t)},i=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},s=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};class c{constructor(t=[],n){this._args=t,this.name=n,this.taps=[],this.interceptors=[],this._call=o,this.call=o,this._callAsync=i,this.callAsync=i,this._promise=s,this.promise=s,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,n,e){if("string"==typeof n)n={name:n.trim()};else if("object"!=typeof n||null===n)throw new Error("Invalid tap options");if("string"!=typeof n.name||""===n.name)throw new Error("Missing name for tap");void 0!==n.context&&r(),n=Object.assign({type:t,fn:e},n),n=this._runRegisterInterceptors(n),this._insert(n)}tap(t,n){this._tap("sync",t,n)}tapAsync(t,n){this._tap("async",t,n)}tapPromise(t,n){this._tap("promise",t,n)}_runRegisterInterceptors(t){for(const n of this.interceptors)if(n.register){const e=n.register(t);void 0!==e&&(t=e)}return t}withOptions(t){const n=n=>Object.assign({},t,"string"==typeof n?{name:n}:n);return{name:this.name,tap:(t,e)=>this.tap(n(t),e),tapAsync:(t,e)=>this.tapAsync(n(t),e),tapPromise:(t,e)=>this.tapPromise(n(t),e),intercept:t=>this.intercept(t),isUsed:()=>this.isUsed(),withOptions:t=>this.withOptions(n(t))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let n=0;n<this.taps.length;n++)this.taps[n]=t.register(this.taps[n])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let n;this._resetCompilation(),"string"==typeof t.before?n=new Set([t.before]):Array.isArray(t.before)&&(n=new Set(t.before));let e=0;"number"==typeof t.stage&&(e=t.stage);let r=this.taps.length;for(;r>0;){r--;const t=this.taps[r];this.taps[r+1]=t;const o=t.stage||0;if(n){if(n.has(t.name)){n.delete(t.name);continue}if(n.size>0)continue}if(!(o>e)){r++;break}}this.taps[r]=t}}Object.setPrototypeOf(c.prototype,null),t.exports=c},function(t,n,e){"use strict";t.exports=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let n;switch(this.init(t),this.options.type){case"sync":n=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`throw ${t};\n`,onResult:t=>`return ${t};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":n=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:t=>`_callback(${t});\n`,onResult:t=>`_callback(null, ${t});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let t=!1;const e=this.contentWithInterceptors({onError:n=>(t=!0,`_error(${n});\n`),onResult:t=>`_resolve(${t});\n`,onDone:()=>"_resolve();\n"});let r="";r+='"use strict";\n',r+="return new Promise((_resolve, _reject) => {\n",t&&(r+="var _sync = true;\n",r+="function _error(_err) {\n",r+="if(_sync)\n",r+="_resolve(Promise.resolve().then(() => { throw _err; }));\n",r+="else\n",r+="_reject(_err);\n",r+="};\n"),r+=this.header(),r+=e,t&&(r+="_sync = false;\n"),r+="});\n",n=new Function(this.args(),r)}return this.deinit(),n}setup(t,n){t._x=n.taps.map(t=>t.fn)}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const n=t.onError,e=t.onResult,r=t.onDone;return this.content(Object.assign(t,{onError:n&&(t=>{let e="";for(let n=0;n<this.options.interceptors.length;n++){this.options.interceptors[n].error&&(e+=`${this.getInterceptor(n)}.error(${t});\n`)}return e+=n(t),e}),onResult:e&&(t=>{let n="";for(let e=0;e<this.options.interceptors.length;e++){this.options.interceptors[e].result&&(n+=`${this.getInterceptor(e)}.result(${t});\n`)}return n+=e(t),n}),onDone:r&&(()=>{let t="";for(let n=0;n<this.options.interceptors.length;n++){this.options.interceptors[n].done&&(t+=this.getInterceptor(n)+".done();\n")}return t+=r(),t})}))}return this.content(t)}header(){let t="";this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n");for(let n=0;n<this.options.interceptors.length;n++){const e=this.options.interceptors[n];e.call&&(t+=`${this.getInterceptor(n)}.call(${this.args({before:e.context?"_context":void 0})});\n`)}return t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:n,onResult:e,onDone:r,rethrowIfPossible:o}){let i="",s=!1;for(let n=0;n<this.options.interceptors.length;n++){const e=this.options.interceptors[n];e.tap&&(s||(i+=`var _tap${t} = ${this.getTap(t)};\n`,s=!0),i+=`${this.getInterceptor(n)}.tap(${e.context?"_context, ":""}_tap${t});\n`)}i+=`var _fn${t} = ${this.getTapFn(t)};\n`;const c=this.options.taps[t];switch(c.type){case"sync":o||(i+=`var _hasError${t} = false;\n`,i+="try {\n"),i+=e?`var _result${t} = _fn${t}(${this.args({before:c.context?"_context":void 0})});\n`:`_fn${t}(${this.args({before:c.context?"_context":void 0})});\n`,o||(i+="} catch(_err) {\n",i+=`_hasError${t} = true;\n`,i+=n("_err"),i+="}\n",i+=`if(!_hasError${t}) {\n`),e&&(i+=e("_result"+t)),r&&(i+=r()),o||(i+="}\n");break;case"async":let s="";s+=e?`(_err${t}, _result${t}) => {\n`:`_err${t} => {\n`,s+=`if(_err${t}) {\n`,s+=n("_err"+t),s+="} else {\n",e&&(s+=e("_result"+t)),r&&(s+=r()),s+="}\n",s+="}",i+=`_fn${t}(${this.args({before:c.context?"_context":void 0,after:s})});\n`;break;case"promise":i+=`var _hasResult${t} = false;\n`,i+=`var _promise${t} = _fn${t}(${this.args({before:c.context?"_context":void 0})});\n`,i+=`if (!_promise${t} || !_promise${t}.then)\n`,i+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');\n`,i+=`_promise${t}.then(_result${t} => {\n`,i+=`_hasResult${t} = true;\n`,e&&(i+=e("_result"+t)),r&&(i+=r()),i+=`}, _err${t} => {\n`,i+=`if(_hasResult${t}) throw _err${t};\n`,i+=n("_err"+t),i+="});\n"}return i}callTapsSeries({onError:t,onResult:n,resultReturns:e,onDone:r,doneReturns:o,rethrowIfPossible:i}){if(0===this.options.taps.length)return r();const s=this.options.taps.findIndex(t=>"sync"!==t.type),c=e||o;let a="",u=r,l=0;for(let e=this.options.taps.length-1;e>=0;e--){const o=e;u!==r&&("sync"!==this.options.taps[o].type||l++>20)&&(l=0,a+=`function _next${o}() {\n`,a+=u(),a+="}\n",u=()=>`${c?"return ":""}_next${o}();\n`);const p=u,f=t=>t?"":r(),h=this.callTap(o,{onError:n=>t(o,n,p,f),onResult:n&&(t=>n(o,t,p,f)),onDone:!n&&p,rethrowIfPossible:i&&(s<0||o<s)});u=()=>h}return a+=u(),a}callTapsLooping({onError:t,onDone:n,rethrowIfPossible:e}){if(0===this.options.taps.length)return n();const r=this.options.taps.every(t=>"sync"===t.type);let o="";r||(o+="var _looper = () => {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(let t=0;t<this.options.interceptors.length;t++){const n=this.options.interceptors[t];n.loop&&(o+=`${this.getInterceptor(t)}.loop(${this.args({before:n.context?"_context":void 0})});\n`)}return o+=this.callTapsSeries({onError:t,onResult:(t,n,e,o)=>{let i="";return i+=`if(${n} !== undefined) {\n`,i+="_loop = true;\n",r||(i+="if(_loopAsync) _looper();\n"),i+=o(!0),i+="} else {\n",i+=e(),i+="}\n",i},onDone:n&&(()=>{let t="";return t+="if(!_loop) {\n",t+=n(),t+="}\n",t}),rethrowIfPossible:e&&r}),o+="} while(_loop);\n",r||(o+="_loopAsync = true;\n",o+="};\n",o+="_looper();\n"),o}callTapsParallel({onError:t,onResult:n,onDone:e,rethrowIfPossible:r,onTap:o=((t,n)=>n())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:n,onDone:e,rethrowIfPossible:r});let i="";i+="do {\n",i+=`var _counter = ${this.options.taps.length};\n`,e&&(i+="var _done = () => {\n",i+=e(),i+="};\n");for(let s=0;s<this.options.taps.length;s++){const c=()=>e?"if(--_counter === 0) _done();\n":"--_counter;",a=t=>t||!e?"_counter = 0;\n":"_counter = 0;\n_done();\n";i+="if(_counter <= 0) break;\n",i+=o(s,()=>this.callTap(s,{onError:n=>{let e="";return e+="if(_counter > 0) {\n",e+=t(s,n,c,a),e+="}\n",e},onResult:n&&(t=>{let e="";return e+="if(_counter > 0) {\n",e+=n(s,t,c,a),e+="}\n",e}),onDone:!n&&(()=>c()),rethrowIfPossible:r}),c,a)}return i+="} while(false);\n",i}args({before:t,after:n}={}){let e=this._args;return t&&(e=[t].concat(e)),n&&(e=e.concat(n)),0===e.length?"":e.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}}},function(t,n,e){"use strict";n.__esModule=!0,n.SyncHook=e(4),n.SyncBailHook=e(8),n.SyncWaterfallHook=e(9),n.SyncLoopHook=e(10),n.AsyncParallelHook=e(11),n.AsyncParallelBailHook=e(12),n.AsyncSeriesHook=e(13),n.AsyncSeriesBailHook=e(14),n.AsyncSeriesLoopHook=e(15),n.AsyncSeriesWaterfallHook=e(16),n.HookMap=e(17),n.MultiHook=e(18)},function(t,n,e){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var n=Object.keys(t),e={},r=0;r<n.length;r++)e[n[r]]=Object.getOwnPropertyDescriptor(t,n[r]);return e},o=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(c(arguments[e]));return n.join(" ")}e=1;for(var r=arguments,i=r.length,s=String(t).replace(o,(function(t){if("%%"===t)return"%";if(e>=i)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}})),a=r[e];e<i;a=r[++e])g(a)||!w(a)?s+=" "+a:s+=" "+c(a);return s},n.deprecate=function(e,r){if(void 0!==t&&!0===t.noDeprecation)return e;if(void 0===t)return function(){return n.deprecate(e,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return e.apply(this,arguments)}};var i,s={};function c(t,e){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(e)?r.showHidden=e:e&&n._extend(r,e),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),l(r,t,r.depth)}function a(t,n){var e=c.styles[n];return e?"["+c.colors[e][0]+"m"+t+"["+c.colors[e][1]+"m":t}function u(t,n){return t}function l(t,e,r){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return m(o)||(o=l(t,o,r)),o}var i=function(t,n){if(b(n))return t.stylize("undefined","undefined");if(m(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}if(d(n))return t.stylize(""+n,"number");if(y(n))return t.stylize(""+n,"boolean");if(g(n))return t.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),c=function(t){var n={};return t.forEach((function(t,e){n[t]=!0})),n}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),k(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(e);if(0===s.length){if(x(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(v(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(_(e))return t.stylize(Date.prototype.toString.call(e),"date");if(k(e))return p(e)}var u,w="",P=!1,A=["{","}"];(h(e)&&(P=!0,A=["[","]"]),x(e))&&(w=" [Function"+(e.name?": "+e.name:"")+"]");return v(e)&&(w=" "+RegExp.prototype.toString.call(e)),_(e)&&(w=" "+Date.prototype.toUTCString.call(e)),k(e)&&(w=" "+p(e)),0!==s.length||P&&0!=e.length?r<0?v(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),u=P?function(t,n,e,r,o){for(var i=[],s=0,c=n.length;s<c;++s)E(n,String(s))?i.push(f(t,n,e,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(f(t,n,e,r,o,!0))})),i}(t,e,r,c,s):s.map((function(n){return f(t,e,r,c,n,P)})),t.seen.pop(),function(t,n,e){if(t.reduce((function(t,n){return n.indexOf("\n")>=0&&0,t+n.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1];return e[0]+n+" "+t.join(", ")+" "+e[1]}(u,w,A)):A[0]+w+A[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,n,e,r,o,i){var s,c,a;if((a=Object.getOwnPropertyDescriptor(n,o)||{value:n[o]}).get?c=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(c=t.stylize("[Setter]","special")),E(r,o)||(s="["+o+"]"),c||(t.seen.indexOf(a.value)<0?(c=g(e)?l(t,a.value,null):l(t,a.value,e-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+c.split("\n").map((function(t){return"   "+t})).join("\n")):c=t.stylize("[Circular]","special")),b(s)){if(i&&o.match(/^\d+$/))return c;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+c}function h(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function g(t){return null===t}function d(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return void 0===t}function v(t){return w(t)&&"[object RegExp]"===P(t)}function w(t){return"object"==typeof t&&null!==t}function _(t){return w(t)&&"[object Date]"===P(t)}function k(t){return w(t)&&("[object Error]"===P(t)||t instanceof Error)}function x(t){return"function"==typeof t}function P(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(e){if(b(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var r=t.pid;s[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else s[e]=function(){};return s[e]},n.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=y,n.isNull=g,n.isNullOrUndefined=function(t){return null==t},n.isNumber=d,n.isString=m,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=b,n.isRegExp=v,n.isObject=w,n.isDate=_,n.isError=k,n.isFunction=x,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=e(6);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var t=new Date,n=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),S[t.getMonth()],n].join(" ")}function E(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.log=function(){console.log("%s - %s",j(),n.format.apply(n,arguments))},n.inherits=e(7),n._extend=function(t,n){if(!n||!w(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t};var $="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(t,n){if(!t){var e=new Error("Promise was rejected with a falsy value");e.reason=t,t=e}return n(t)}n.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if($&&t[$]){var n;if("function"!=typeof(n=t[$]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,$,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var n,e,r=new Promise((function(t,r){n=t,e=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?e(t):n(r)}));try{t.apply(this,o)}catch(t){e(t)}return r}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),$&&Object.defineProperty(n,$,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,r(t))},n.promisify.custom=$,n.callbackify=function(n){if("function"!=typeof n)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var o=e.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};n.apply(this,e).then((function(n){t.nextTick(s,null,n)}),(function(n){t.nextTick(O,n,s)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(n)),Object.defineProperties(e,r(n)),e}}).call(this,e(5))},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onDone:n,rethrowIfPossible:e}){return this.callTapsSeries({onError:(n,e)=>t(e),onDone:n,rethrowIfPossible:e})}},s=()=>{throw new Error("tapAsync is not supported on a SyncHook")},c=()=>{throw new Error("tapPromise is not supported on a SyncHook")},a=function(t){return i.setup(this,t),i.create(t)};function u(t=[],n){const e=new r(t,n);return e.constructor=u,e.tapAsync=s,e.tapPromise=c,e.compile=a,e}u.prototype=null,t.exports=u},function(t,n){var e,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,u=[],l=!1,p=-1;function f(){l&&a&&(l=!1,a.length?u=a.concat(u):p=-1,u.length&&h())}function h(){if(!l){var t=c(f);l=!0;for(var n=u.length;n;){for(a=u,u=[];++p<n;)a&&a[p].run();p=-1,n=u.length}a=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function y(t,n){this.fun=t,this.array=n}function g(){}o.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];u.push(new y(t,n)),1!==u.length||l||c(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onResult:n,resultReturns:e,onDone:r,rethrowIfPossible:o}){return this.callTapsSeries({onError:(n,e)=>t(e),onResult:(t,e,r)=>`if(${e} !== undefined) {\n${n(e)};\n} else {\n${r()}}\n`,resultReturns:e,onDone:r,rethrowIfPossible:o})}},s=()=>{throw new Error("tapAsync is not supported on a SyncBailHook")},c=()=>{throw new Error("tapPromise is not supported on a SyncBailHook")},a=function(t){return i.setup(this,t),i.create(t)};function u(t=[],n){const e=new r(t,n);return e.constructor=u,e.tapAsync=s,e.tapPromise=c,e.compile=a,e}u.prototype=null,t.exports=u},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onResult:n,resultReturns:e,rethrowIfPossible:r}){return this.callTapsSeries({onError:(n,e)=>t(e),onResult:(t,n,e)=>{let r="";return r+=`if(${n} !== undefined) {\n`,r+=`${this._args[0]} = ${n};\n`,r+="}\n",r+=e(),r},onDone:()=>n(this._args[0]),doneReturns:e,rethrowIfPossible:r})}},s=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},c=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},a=function(t){return i.setup(this,t),i.create(t)};function u(t=[],n){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const e=new r(t,n);return e.constructor=u,e.tapAsync=s,e.tapPromise=c,e.compile=a,e}u.prototype=null,t.exports=u},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onDone:n,rethrowIfPossible:e}){return this.callTapsLooping({onError:(n,e)=>t(e),onDone:n,rethrowIfPossible:e})}},s=()=>{throw new Error("tapAsync is not supported on a SyncLoopHook")},c=()=>{throw new Error("tapPromise is not supported on a SyncLoopHook")},a=function(t){return i.setup(this,t),i.create(t)};function u(t=[],n){const e=new r(t,n);return e.constructor=u,e.tapAsync=s,e.tapPromise=c,e.compile=a,e}u.prototype=null,t.exports=u},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onDone:n}){return this.callTapsParallel({onError:(n,e,r,o)=>t(e)+o(!0),onDone:n})}},s=function(t){return i.setup(this,t),i.create(t)};function c(t=[],n){const e=new r(t,n);return e.constructor=c,e.compile=s,e._call=void 0,e.call=void 0,e}c.prototype=null,t.exports=c},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onResult:n,onDone:e}){let r="";return r+=`var _results = new Array(${this.options.taps.length});\n`,r+="var _checkDone = () => {\n",r+="for(var i = 0; i < _results.length; i++) {\n",r+="var item = _results[i];\n",r+="if(item === undefined) return false;\n",r+="if(item.result !== undefined) {\n",r+=n("item.result"),r+="return true;\n",r+="}\n",r+="if(item.error) {\n",r+=t("item.error"),r+="return true;\n",r+="}\n",r+="}\n",r+="return false;\n",r+="}\n",r+=this.callTapsParallel({onError:(t,n,e,r)=>{let o="";return o+=`if(${t} < _results.length && ((_results.length = ${t+1}), (_results[${t}] = { error: ${n} }), _checkDone())) {\n`,o+=r(!0),o+="} else {\n",o+=e(),o+="}\n",o},onResult:(t,n,e,r)=>{let o="";return o+=`if(${t} < _results.length && (${n} !== undefined && (_results.length = ${t+1}), (_results[${t}] = { result: ${n} }), _checkDone())) {\n`,o+=r(!0),o+="} else {\n",o+=e(),o+="}\n",o},onTap:(t,n,e,r)=>{let o="";return t>0&&(o+=`if(${t} >= _results.length) {\n`,o+=e(),o+="} else {\n"),o+=n(),t>0&&(o+="}\n"),o},onDone:e}),r}},s=function(t){return i.setup(this,t),i.create(t)};function c(t=[],n){const e=new r(t,n);return e.constructor=c,e.compile=s,e._call=void 0,e.call=void 0,e}c.prototype=null,t.exports=c},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onDone:n}){return this.callTapsSeries({onError:(n,e,r,o)=>t(e)+o(!0),onDone:n})}},s=function(t){return i.setup(this,t),i.create(t)};function c(t=[],n){const e=new r(t,n);return e.constructor=c,e.compile=s,e._call=void 0,e.call=void 0,e}c.prototype=null,t.exports=c},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onResult:n,resultReturns:e,onDone:r}){return this.callTapsSeries({onError:(n,e,r,o)=>t(e)+o(!0),onResult:(t,e,r)=>`if(${e} !== undefined) {\n${n(e)}\n} else {\n${r()}}\n`,resultReturns:e,onDone:r})}},s=function(t){return i.setup(this,t),i.create(t)};function c(t=[],n){const e=new r(t,n);return e.constructor=c,e.compile=s,e._call=void 0,e.call=void 0,e}c.prototype=null,t.exports=c},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onDone:n}){return this.callTapsLooping({onError:(n,e,r,o)=>t(e)+o(!0),onDone:n})}},s=function(t){return i.setup(this,t),i.create(t)};function c(t=[],n){const e=new r(t,n);return e.constructor=c,e.compile=s,e._call=void 0,e.call=void 0,e}c.prototype=null,t.exports=c},function(t,n,e){"use strict";const r=e(0),o=e(1);const i=new class extends o{content({onError:t,onResult:n,onDone:e}){return this.callTapsSeries({onError:(n,e,r,o)=>t(e)+o(!0),onResult:(t,n,e)=>{let r="";return r+=`if(${n} !== undefined) {\n`,r+=`${this._args[0]} = ${n};\n`,r+="}\n",r+=e(),r},onDone:()=>n(this._args[0])})}},s=function(t){return i.setup(this,t),i.create(t)};function c(t=[],n){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const e=new r(t,n);return e.constructor=c,e.compile=s,e._call=void 0,e.call=void 0,e}c.prototype=null,t.exports=c},function(t,n,e){"use strict";const r=e(3),o=(t,n)=>n;class i{constructor(t,n){this._map=new Map,this.name=n,this._factory=t,this._interceptors=[]}get(t){return this._map.get(t)}for(t){const n=this.get(t);if(void 0!==n)return n;let e=this._factory(t);const r=this._interceptors;for(let n=0;n<r.length;n++)e=r[n].factory(t,e);return this._map.set(t,e),e}intercept(t){this._interceptors.push(Object.assign({factory:o},t))}}i.prototype.tap=r.deprecate((function(t,n,e){return this.for(t).tap(n,e)}),"HookMap#tap(key,â€¦) is deprecated. Use HookMap#for(key).tap(â€¦) instead."),i.prototype.tapAsync=r.deprecate((function(t,n,e){return this.for(t).tapAsync(n,e)}),"HookMap#tapAsync(key,â€¦) is deprecated. Use HookMap#for(key).tapAsync(â€¦) instead."),i.prototype.tapPromise=r.deprecate((function(t,n,e){return this.for(t).tapPromise(n,e)}),"HookMap#tapPromise(key,â€¦) is deprecated. Use HookMap#for(key).tapPromise(â€¦) instead."),t.exports=i},function(t,n,e){"use strict";e(0);class r{constructor(t,n){this.hooks=t,this.name=n}tap(t,n){for(const e of this.hooks)e.tap(t,n)}tapAsync(t,n){for(const e of this.hooks)e.tapAsync(t,n)}tapPromise(t,n){for(const e of this.hooks)e.tapPromise(t,n)}isUsed(){for(const t of this.hooks)if(t.isUsed())return!0;return!1}intercept(t){for(const n of this.hooks)n.intercept(t)}withOptions(t){return new r(this.hooks.map(n=>n.withOptions(t)),this.name)}}t.exports=r},function(t,n,e){"use strict";e.r(n),e.d(n,"Pluginize",(function(){return v})),e.d(n,"PluginizeAsync",(function(){return E}));var r="production";function o(t,n){if("development"==r)throw n;throw new Error(t)}function i(t,n,e){t&&o(n,e)}function s(t){r=t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,n){if(t){if("string"==typeof t)return l(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,n):void 0}}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var p={name:"DefaultPlugins",plugins:[new function(){var t=["name","hooks","init","allowKeys","desactivateKeyCheck","plugins","debug"],n=!1;return{name:"ValidateConfigPlugin",hooks:{initPlugin:function(e,r){e.allowKeys&&t.push.apply(t,a(e.allowKeys)),e.desactivateKeyCheck&&(n=e.desactivateKeyCheck)},pluginsInitialized:function(e){if(!n){var r,i=function(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=u(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==e.return||e.return()}finally{if(c)throw i}}}}(e.plugins);try{for(i.s();!(r=i.n()).done;)for(var s=r.value,c=0,a=Object.keys(s);c<a.length;c++){var l=a[c];t.includes(l)||o('Config attribute "'.concat(l,'" is used but not allowed. Allowed are ').concat(t.join(", "),". \n                            You want to disable this proove? set desactivateKeyCheck:true.\n                            You want to allow another config attributes? Add allowKeys:['yourkeyname']."),"config.invalidKey")}}catch(t){i.e(t)}finally{i.f()}}}},init:function(){return{desactivateKeyCheck:function(){n=!0}}}}},new function(t){return{name:"InitHooksPlugin",allowKeys:["addHooks","hooks"],hooks:{initPlugin:function(t,n){if(t.addHooks){i(Array.isArray(t.addHooks)||"object"!=c(t.addHooks),'Error in plugin "'.concat(t.name,'": config.addHooks must be an object but is a ').concat(c(t.addHooks)),"config.addHooks.wrongtype");for(var e=0,r=Object.keys(t.addHooks);e<r.length;e++){var o=r[e];n.hooks[o]=t.addHooks[o]}}if(t.hooks){i(Array.isArray(t.hooks)||"object"!=c(t.hooks),'Error in plugin "'.concat(t.name,'": config.hooks must be an object but is a ').concat(c(t.hooks)),"config.hooks.wrongtype");for(var s=0,a=Object.keys(t.hooks);s<a.length;s++){var u=a[s];i(!n.hooks[u],'There is no Hook named "'+u+'", declared in plugin '+t.name+' . Is it correctly written? If yes, initialize it first with config attribute "addHooks"',"config.hooks.notDefined"),n.hooks[u].tap(t.name,t.hooks[u])}}}},init:function(t,n){return n.config.hooks&&n.config.hooks.preInitPlugin&&n.hooks.preInitPlugin.tap("preInitPlugin",n.config.hooks.preInitPlugin),{addHooks:function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var o=r[e];n.hooks[o]=t[o]}},on:function(t,e,r){if(!n.hooks[t])throw new Error('Hook with name "'+t+'" does not exist. context.on(name, pluginname, fn) failed');return n.hooks[t].tap(e,r)}}}}},new function(){return{allowKeys:["return"],name:"ReturnPlugin",hooks:{initPlugin:function(t,n){t.return&&(n.return=t.return)}}}}]},f=e(2);function h(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=d(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==e.return||e.return()}finally{if(c)throw i}}}}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,n){if(t){if("string"==typeof t)return m(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(t,n):void 0}}function m(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];if(t.apply){var e=Array.isArray(t.apply)?t.apply:[t.apply];e=e.map((function(t){return t.name=t.name||"instance(config)",t})),n.push.apply(n,g(e))}function r(t,n){if(n.log('- Add plugin "'+t.name+'"'),i(!(t=n.hooks.preInitPlugin.call(t,n)).name,"Plugin ".concat(JSON.stringify(t),' has no name. Please define a name by adding an attribute name:"pluginname" to your plugin.'),"plugin.noName"),i("function"==typeof t,"Plugin ".concat(t.name," is a function, but should be a configuration object. Did you forget calling it? (eg: PluginName())"),"plugin.isFunction"),i("object"!==y(t)||Array.isArray(t),"Plugin ".concat(t.name," should be a configuration of type object, but is typeof ").concat(y(t),"."),"plugin.wrongType"),n.plugins.push(t),t.init){i("function"!=typeof t.init,'Error in plugin "'.concat(t.name,'": config.init must be a function but is a ').concat(y(t.init)),"config.init.wrongtype"),n.log("- Execute init() function of plugin ".concat(t.name));var e=t.init(t,n);if(e&&!e._context&&"object"==y(e)&&!Array.isArray(e)){var o,s=h(Object.keys(e)||{});try{for(s.s();!(o=s.n()).done;){var c=o.value;n.log("- add "+c+" to global context."),n[c]=e[c]}}catch(t){s.e(t)}finally{s.f()}}}t.hooks&&t.hooks.initPlugin&&n.hooks.initPlugin.tap(t.name,t.hooks.initPlugin),i(t.plugins&&!Array.isArray(t.plugins),'Error in plugin "'.concat(t.name,'": config.plugin must be an array but is an ').concat(y(t.plugins)),"config.plugin.wrongtype");var a,u=h(t.plugins||[]);try{for(u.s();!(a=u.n()).done;){r(a.value,n)}}catch(t){u.e(t)}finally{u.f()}return n}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={plugins:[],config:e,_context:!0,addPlugin:r,hooks:{preInitPlugin:new f.SyncWaterfallHook(["config","context"]),pluginsInitialized:new f.SyncHook(["context"]),initPlugin:new f.SyncHook(["plugin","context"])},log:function(){var t;e.debug&&(t=console).log.apply(t,arguments)}};t.changeConfig&&(e=t.changeConfig(e,o)),i(null==e,"error in create(config): config.changeConfig returns null but should return an object (the modified config)","config.changeConfig.returnNull"),i(Array.isArray(e)||"object"!==y(e),"error in create(config): config.changeConfig returns a "+y(e.changeConfig)+" but should return an object (the modified config)","config.changeConfig.wrongType"),e.debug&&s("development"),e.name||(e.name="Pluginize"),o.log("Starting Pluginize."),r(p,o);var c,a=h(n);try{for(a.s();!(c=a.n()).done;){var u=c.value;r(u,o)}}catch(t){a.e(t)}finally{a.f()}r(e,o);var l,g=h(o.plugins);try{for(g.s();!(l=g.n()).done;){var d=l.value;i(null==d,"error in Pluginize(config): hook preInitPlugin - a listener returns null but should  return an object (the modified config)","config.changeConfig.returnNull"),i(Array.isArray(d)||"object"!==y(d),"error in Pluginize(config): hook preInitPlugin - a listener should return an object (the modified config) but returns a "+y(d),"config.changeConfig.wrongType"),o.log('- call hook "initPlugin" of plugin '+d.name),o.hooks.initPlugin.call(d,o)}}catch(t){g.e(t)}finally{g.f()}return o.log('- call hook "pluginsInitialized"'),o.hooks.pluginsInitialized.call(o),o.return?o[o.return]:o}return o._pluginize="PluginizeSync",o}var v=b();function w(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=A(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==e.return||e.return()}finally{if(c)throw i}}}}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,n,e,r,o,i,s){try{var c=t[i](s),a=c.value}catch(t){return void e(t)}c.done?n(a):Promise.resolve(a).then(r,o)}function x(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function s(t){k(i,r,o,s,c,"next",t)}function c(t){k(i,r,o,s,c,"throw",t)}s(void 0)}))}}function P(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||A(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,n){if(t){if("string"==typeof t)return S(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?S(t,n):void 0}}function S(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];if(t.apply){var e=Array.isArray(t.apply)?t.apply:[t.apply];e=e.map((function(t){return t.name=t.name||"instance(config)",t})),n.push.apply(n,P(e))}function r(t,n){return o.apply(this,arguments)}function o(){return(o=x(regeneratorRuntime.mark((function t(n,e){var o,s,c,a,u,l,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.log('- Add plugin "'+n.name+'"'),t.next=3,e.hooks.preInitPlugin.promise(n,e);case 3:if(i(!(n=t.sent).name,"Plugin ".concat(JSON.stringify(n),' has no name. Please define a name by adding an attribute name:"pluginname" to your plugin.'),"plugin.noName"),i("function"==typeof n,"Plugin ".concat(n.name," is a function, but should be a configuration object. Did you forget calling it? (eg: PluginName())"),"plugin.isFunction"),i("object"!==_(n)||Array.isArray(n),"Plugin ".concat(n.name," should be a configuration of type object, but is typeof ").concat(_(n),"."),"plugin.wrongType"),e.plugins.push(n),!n.init){t.next=15;break}return i("function"!=typeof n.init,'Error in plugin "'.concat(n.name,'": config.init must be a function but is a ').concat(_(n.init)),"config.init.wrongtype"),e.log("- Execute init() function of plugin ".concat(n.name)),t.next=13,n.init(n,e);case 13:if((o=t.sent)&&!o._context&&"object"==_(o)&&!Array.isArray(o)){s=w(Object.keys(o)||{});try{for(s.s();!(c=s.n()).done;)a=c.value,e.log("- add "+a+" to global context."),e[a]=o[a]}catch(t){s.e(t)}finally{s.f()}}case 15:if(!n.hooks||!n.hooks.initPlugin){t.next=18;break}return t.next=18,e.hooks.initPlugin.tap(n.name,n.hooks.initPlugin);case 18:i(n.plugins&&!Array.isArray(n.plugins),'Error in plugin "'.concat(n.name,'": config.plugin must be an array but is an ').concat(_(n.plugins)),"config.plugin.wrongtype"),u=w(n.plugins||[]),t.prev=20,u.s();case 22:if((l=u.n()).done){t.next=28;break}return p=l.value,t.next=26,r(p,e);case 26:t.next=22;break;case 28:t.next=33;break;case 30:t.prev=30,t.t0=t.catch(20),u.e(t.t0);case 33:return t.prev=33,u.f(),t.finish(33);case 36:return t.abrupt("return",e);case 37:case"end":return t.stop()}}),t,null,[[20,30,33,36]])})))).apply(this,arguments)}function c(){return a.apply(this,arguments)}function a(){return(a=x(regeneratorRuntime.mark((function e(){var o,c,a,u,l,h,y,g,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=d.length>0&&void 0!==d[0]?d[0]:{},c={plugins:[],config:o,_context:!0,addPlugin:r,hooks:{preInitPlugin:new f.AsyncSeriesWaterfallHook(["config","context"]),pluginsInitialized:new f.AsyncSeriesHook(["context"]),initPlugin:new f.AsyncSeriesHook(["plugin","context"])},log:function(){var t;o.debug&&(t=console).log.apply(t,arguments)}},!t.changeConfig){e.next=6;break}return e.next=5,t.changeConfig(o,c);case 5:o=e.sent;case 6:return i(null==o,"error in create(config): config.changeConfig returns null but should return an object (the modified config)","config.changeConfig.returnNull"),i(Array.isArray(o)||"object"!==_(o),"error in create(config): config.changeConfig returns a "+_(o.changeConfig)+" but should return an object (the modified config)","config.changeConfig.wrongType"),o.debug&&s("development"),o.name||(o.name="PluginizeAsync"),c.log("Starting Pluginize."),e.next=13,r(p,c);case 13:a=w(n),e.prev=14,a.s();case 16:if((u=a.n()).done){e.next=22;break}return l=u.value,e.next=20,r(l,c);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:return e.next=32,r(o,c);case 32:h=w(c.plugins),e.prev=33,h.s();case 35:if((y=h.n()).done){e.next=44;break}return i(null==(g=y.value),"error in Pluginize(config): hook preInitPlugin - a listener returns null but should  return an object (the modified config)","config.changeConfig.returnNull"),i(Array.isArray(g)||"object"!==_(g),"error in Pluginize(config): hook preInitPlugin - a listener should return an object (the modified config) but returns a "+_(g),"config.changeConfig.wrongType"),c.log('- call hook "initPlugin" of plugin '+g.name),e.next=42,c.hooks.initPlugin.promise(g,c);case 42:e.next=35;break;case 44:e.next=49;break;case 46:e.prev=46,e.t1=e.catch(33),h.e(e.t1);case 49:return e.prev=49,h.f(),e.finish(49);case 52:return c.log('- call hook "pluginsInitialized"'),e.next=55,c.hooks.pluginsInitialized.promise(c);case 55:if(!c.return){e.next=59;break}return e.abrupt("return",c[c.return]);case 59:return e.abrupt("return",c);case 60:case"end":return e.stop()}}),e,null,[[14,24,27,30],[33,46,49,52]])})))).apply(this,arguments)}return c._pluginize="PluginizeAsync",c}v.create=b;var E=j();E.create=j}]);